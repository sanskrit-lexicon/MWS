MWS/mwauthorities/ls/issue134

Ref: https://github.com/sanskrit-lexicon/MWS/issues/134


# -------------------------------------------------------------
# -------------------------------------------------------------
# -------------------------------------------------------------

Start with a copy of csl-orig/v02/mw/mw.txt at commit
  3d01a2659bef6ef71c4eccf3ab713ae062ec13cd

# change to csl-orig repository on local installation
cd /c/xampp/htdocs/cologne/csl-orig/
# generate temp_mw_0 .txt in this spruch directory
  git show 3d01a2659:v02/mw/mw.txt > /c/xampp/htdocs/sanskrit-lexicon/MWS/mwauthorities/ls/issue134/temp_mw_0.txt
# return to this directory
cd /c/xampp/htdocs/sanskrit-lexicon/MWS/mwauthorities/ls/issue134/
# -------------------------------------------------------------
# -------------------------------------------------------------
temp_tooltip.txt
cd /c/xampp/htdocs/cologne/csl-pywork/v02/distinctfiles/mw/pywork/mwauth

python tooltip.py roman mwauth.txt temp_tooltip.txt
737 auth records
737 lines written to temp_tooltip.txt

cd /c/xampp/htdocs/sanskrit-lexicon/MWS/mwauthorities/ls/issue134/
cp /c/xampp/htdocs/cologne/csl-pywork/v02/distinctfiles/mw/pywork/mwauth/temp_tooltip.txt .

---------------------------------------------------------------------
temp_1.txt misc. changes
cp temp_mw_0.txt temp_mw_1.txt
touch change_1.txt

---------------------------------------------------------------------
look for RV ls references which do not start 'normally' and where
the previous ls IS normal.
Example:
in L=89869, dattra
 <ls n="RV.">viii, 49, 2.</ls>
in L= 89870, dattravat
 <ls>vi, 50, 8</ls>  -> <ls n="RV.">vi, 50, 8</ls>
 
Modify a program used in pwg for similar purpose:
cp /c/xampp/htdocs/sanskrit-lexicon/pwg/pwg_ls2/rv/changecode/changes_02b.py make_change_noref.py
---------------------------------------------------------------------
# This program is run multiple times with option 1,
# picking up a few changes each time.
# change_1.txt accumulates the sequence of change files generated by the
# program.  
---------------------------------------------------------------------
python make_change_noref.py 'RV.' 1 temp_mw_1.txt temp_tooltip.txt temp_change_noref_RV_1.txt

# manually insert temp_change_noref_RV_1.txt into change_1.txt
python updateByLine.py temp_mw_0.txt change_1.txt temp_mw_1.txt
127 change transactions from change_1.txt

# 1a: rerun with option 1 
python make_change_noref.py 'RV.' 1 temp_mw_1.txt temp_tooltip.txt temp_change_noref_RV_1a.txt
20 cases written to temp_change_noref_RV_1a.txt
# manually insert temp_change_noref_RV_1a.txt into change_1.txt
python updateByLine.py temp_mw_0.txt change_1.txt temp_mw_1.txt
147 change transactions from change_1.txt

# 1b: rerun with option 1 
python make_change_noref.py 'RV.' 1 temp_mw_1.txt temp_tooltip.txt temp_change_noref_RV_1b.txt
7 cases written to temp_change_noref_RV_1b.txt
# manually insert temp_change_noref_RV_1b.txt into change_1.txt
python updateByLine.py temp_mw_0.txt change_1.txt temp_mw_1.txt
154 change transactions from change_1.txt

# 1c: rerun with option 1 
python make_change_noref.py 'RV.' 1 temp_mw_1.txt temp_tooltip.txt temp_change_noref_RV_1c.txt
1 cases written to temp_change_noref_RV_1c.txt
# manually insert temp_change_noref_RV_1c.txt into change_1.txt
python updateByLine.py temp_mw_0.txt change_1.txt temp_mw_1.txt
155 change transactions from change_1.txt

# 1d: rerun with option 1 
python make_change_noref.py 'RV.' 1 temp_mw_1.txt temp_tooltip.txt temp_change_noref_RV_1d.txt
1 cases written to temp_change_noref_RV_1d.txt
# manually insert temp_change_noref_RV_1d.txt into change_1.txt
python updateByLine.py temp_mw_0.txt change_1.txt temp_mw_1.txt
156 change transactions from change_1.txt

# 1e: rerun with option 1 
python make_change_noref.py 'RV.' 1 temp_mw_1.txt temp_tooltip.txt temp_change_noref_RV_1e.txt
0 cases written to temp_change_noref_RV_1e.txt

FINISHED WITH OPTION 1.
--------------------------------------------------------------------------
# Now we do the same thing with 'man' option, generating further
# change transactions for change_1.txt.
# man:   (manual)
--------------------------------------------------------------------------
python make_change_noref.py 'RV.' man temp_mw_1.txt temp_tooltip.txt temp_change_noref_RV_man.txt
136 cases written to temp_change_noref_RV_man.txt
# manually adjust temp_change_noref_RV_man.txt
# manually insert temp_change_noref_RV_man.txt into change_1.txt
python updateByLine.py temp_mw_0.txt change_1.txt temp_mw_1.txt
286 change transactions from change_1.txt

# rerun option = man
python make_change_noref.py 'RV.' man temp_mw_1.txt temp_tooltip.txt temp_change_noref_RV_man.txt
21 cases written to temp_change_noref_RV_man.txt
# manually adjust temp_change_noref_RV_man.txt
# manually insert temp_change_noref_RV_man.txt into change_1.txt
python updateByLine.py temp_mw_0.txt change_1.txt temp_mw_1.txt
301 change transactions from change_1.txt

# rerun option = man
python make_change_noref.py 'RV.' man temp_mw_1.txt temp_tooltip.txt temp_change_noref_RV_man.txt
8 cases written to temp_change_noref_RV_man.txt
# manually adjust temp_change_noref_RV_man.txt
# manually insert temp_change_noref_RV_man.txt into change_1.txt
python updateByLine.py temp_mw_0.txt change_1.txt temp_mw_1.txt
304 change transactions from change_1.txt

# rerun option = man
python make_change_noref.py 'RV.' man temp_mw_1.txt temp_tooltip.txt temp_change_noref_RV_man.txt
6 cases written to temp_change_noref_RV_man.txt
  THESE CASES remain unsolved.
copied to abnormal_noref_RV.txt  <<< these not resolved.

--------------------------------------------------------------------------
Now we are done with change_1.txt.
Recreate mw.xml from temp_mw_1.txt and revise change_1.txt to correct
errors introduced in the manual changes.
---------------------------------------------------------------------------
install of temp_mw_1.txt to check xml
cp temp_mw_1.txt /c/xampp/htdocs/cologne/csl-orig/v02/mw/mw.txt
cd /c/xampp/htdocs/cologne/csl-pywork/v02
grep 'mw ' redo_xampp_all.sh
sh generate_dict.sh mw  ../../mw
sh xmlchk_xampp.sh mw
# correct errors (originally in  32 lines! ugh!)
# rerun until
 #prints 'ok'
cd /c/xampp/htdocs/sanskrit-lexicon/MWS/mwauthorities/ls/issue134

--------------------------------------------------------------------------
NOW change_2.txt.  These deal with punctuation type errors notably of
type <ls>X  where X is not as it should be.
The various bad X values are expressed as regular expressions,
The make_change_regex.py generates prototype change transactions,
which are then corrected manually, and inserted into change_2.txt.
There are 12 different subsections of change_2.txt for the different
regular expresions. 
--------------------------------------------------------------------------
## ls element followed by punctuation.
Ref: https://github.com/sanskrit-lexicon/MWS/issues/134#issuecomment-1172055752
touch change_2.txt
cp temp_mw_1.txt temp_mw_2.txt

cp make_change_noref.py make_change_lspunct.py
revise make_change_lspunct.py to extract with various options.

# option  '<ls>,'
python make_change_regex.py '<ls>,'  temp_mw_1.txt temp_change_lspunct_1.txt
75 cases written to temp_change_lspunct_1.txt
# manually change temp_change_lspunct_1.txt
# insert temp_change_lspunct_1.txt into change_2.txt
python updateByLine.py temp_mw_1.txt change_2.txt temp_mw_2.txt
76 change transactions from change_2.txt

# option  '<ls> '
python make_change_regex.py '<ls> '  temp_mw_2.txt temp_change_lspunct_2.txt
65 cases written to temp_change_lspunct_2.txt
# manually change temp_change_lspunct_2.txt
# insert temp_change_lspunct_2.txt into change_2.txt
python updateByLine.py temp_mw_1.txt change_2.txt temp_mw_2.txt
161 change transactions from change_2.txt

# option  '<ls>;'
python make_change_regex.py '<ls>;'  temp_mw_2.txt temp_change_lspunct_3.txt
23 cases written to temp_change_lspunct_3.txt
# manually change temp_change_lspunct_3.txt
# insert temp_change_lspunct_3.txt into change_2.txt
python updateByLine.py temp_mw_1.txt change_2.txt temp_mw_2.txt
184 change transactions from change_2.txt

# option  '<ls>[.?]'
python make_change_regex.py '<ls>[.?]'  temp_mw_2.txt temp_change_lspunct_4.txt
6 cases written to temp_change_lspunct_4.txt
# manually change temp_change_lspunct_4.txt
# insert temp_change_lspunct_4.txt into change_2.txt
python updateByLine.py temp_mw_1.txt change_2.txt temp_mw_2.txt
190 change transactions from change_2.txt

# option  '<ls>i[^b]'
python make_change_regex.py '<ls>i[^b]'  temp_mw_2.txt temp_change_lspunct_5.txt
612 cases written to temp_change_lspunct_5.txt
# manually change temp_change_lspunct_5.txt
# insert temp_change_lspunct_5.txt into change_2.txt
python updateByLine.py temp_mw_1.txt change_2.txt temp_mw_2.txt
1327 change transactions from change_2.txt
_ => </ls.
<ls>xib.</ls> -> <ls>ib.</ls>
#

# option  '<ls>x'
python make_change_regex.py '<ls>x' temp_mw_2.txt temp_change_lspunct_6.txt
443 cases written to temp_change_lspunct_6.txt
# manually change temp_change_lspunct_6.txt
# insert temp_change_lspunct_6.txt into change_2.txt
python updateByLine.py temp_mw_1.txt change_2.txt temp_mw_2.txt
1813 change transactions from change_2.txt

# option  '<ls>v'
python make_change_regex.py '<ls>v' temp_mw_2.txt temp_change_lspunct_7.txt
372 cases written to temp_change_lspunct_7.txt
# manually change temp_change_lspunct_7.txt
# insert temp_change_lspunct_7.txt into change_2.txt
python updateByLine.py temp_mw_1.txt change_2.txt temp_mw_2.txt
2232 change transactions from change_2.txt

# option  '<ls>\d'
python make_change_regex.py '<ls>\d' temp_mw_2.txt temp_change_lspunct_8.txt
177 cases written to temp_change_lspunct_8.txt
# manually change temp_change_lspunct_8.txt
# insert temp_change_lspunct_8.txt into change_2.txt
python updateByLine.py temp_mw_1.txt change_2.txt temp_mw_2.txt
2424 change transactions from change_2.txt

# option  '<ls>ib\. '
python make_change_regex.py '<ls>ib\. ' temp_mw_2.txt temp_change_lspunct_9.txt
60 cases written to temp_change_lspunct_9.txt
# manually change temp_change_lspunct_9.txt
# insert temp_change_lspunct_9.txt into change_2.txt
python updateByLine.py temp_mw_1.txt change_2.txt temp_mw_2.txt
2495 change transactions from change_2.txt

# option  '<ls>[cl]'
python make_change_regex.py '<ls>[cl]' temp_mw_2.txt temp_change_lspunct_10.txt
66 cases written to temp_change_lspunct_10.txt
# manually change temp_change_lspunct_10.txt
# insert temp_change_lspunct_10.txt into change_2.txt
python updateByLine.py temp_mw_1.txt change_2.txt temp_mw_2.txt
2569 change transactions from change_2.txt

# option  '<ls>[a-hj-z]'
python make_change_regex.py '<ls>[a-hj-z]' temp_mw_2.txt temp_change_lspunct_11.txt
18 cases written to temp_change_lspunct_11.txt
# manually change temp_change_lspunct_11.txt
# insert temp_change_lspunct_11.txt into change_2.txt
python updateByLine.py temp_mw_1.txt change_2.txt temp_mw_2.txt
2590 change transactions from change_2.txt

# change <ls n="?"> to <ls n="Unknown">
#  10 cases. Reason:  Display program doesn't handle "?" properly.
#  Add these to change_2.txt
python updateByLine.py temp_mw_1.txt change_2.txt temp_mw_2.txt
2600 change transactions from change_2.txt


---------------------------------------------------------------------------
install of temp_mw_2.txt to check xml
cp temp_mw_2.txt /c/xampp/htdocs/cologne/csl-orig/v02/mw/mw.txt
cd /c/xampp/htdocs/cologne/csl-pywork/v02
grep 'mw ' redo_xampp_all.sh
sh generate_dict.sh mw  ../../mw
sh xmlchk_xampp.sh mw
# correct errors 
# rerun until
 #prints 'ok'
cd /c/xampp/htdocs/sanskrit-lexicon/MWS/mwauthorities/ls/issue134

Add 'Unknown' as unknown literary source in
/c/xampp/htdocs/cologne/csl-pywork/v02/distinctfiles/mw/pywork/mwauth/mwauth.txt.
---------------------------------------------------------------------------
Push the csl-orig and csl-pywork to Github,
and update the correspondents at Cologne web site.
DONE with this batch of corrections.
---------------------------------------------------------------------------
